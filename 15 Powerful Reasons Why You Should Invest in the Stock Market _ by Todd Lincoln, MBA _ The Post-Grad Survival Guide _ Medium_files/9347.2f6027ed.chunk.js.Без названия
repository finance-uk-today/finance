(self.webpackChunklite=self.webpackChunklite||[]).push([[9347],{49347:(e,n,t)=>{"use strict";t.d(n,{Z:()=>W,G:()=>q});var o=t(28655),i=t.n(o),r=t(63038),l=t.n(r),a=t(71439),s=t(67294),c=t(70561),u=t(80439),d=t(88914);function m(){var e=i()(["\n  mutation PostAllowResponsesMutation($targetPostId: ID!, $allowResponses: Boolean!) {\n    setPostAllowResponses(targetPostId: $targetPostId, allowResponses: $allowResponses) {\n      id\n      allowResponses\n    }\n  }\n"]);return m=function(){return e},e}var p=(0,a.Ps)(m()),f=(0,c.$j)()((function(e){var n=e.children,t=e.dispatch,o=e.onCompleted,i=e.targetPostId;return s.createElement(u.mm,{mutation:p,onCompleted:function(){t((0,d.Dx)({message:"Responses are now hidden for this post."})),o&&o()},variables:{targetPostId:i,allowResponses:!1},optimisticResponse:{__typename:"Mutation",setPostAllowResponses:{__typename:"Post",id:i,allowResponses:!1}}},(function(e){return n({mutate:e})}))})),E=(0,c.$j)()((function(e){var n=e.children,t=e.dispatch,o=e.onCompleted,i=e.targetPostId;return s.createElement(u.mm,{mutation:p,onCompleted:function(){t((0,d.Dx)({message:"Responses are now shown for this post."})),o&&o()},variables:{targetPostId:i,allowResponses:!0},optimisticResponse:{__typename:"Mutation",setPostAllowResponses:{__typename:"Post",id:i,allowResponses:!0}}},(function(e){return n({mutate:e})}))})),v=t(28774),h=t(33241),g=t(885),b=t(35848),C=t(79316),w=function(e){var n=e.onConfirm,t=e.isVisible,o=e.hide;return s.createElement(C.QH,{onConfirm:n,isVisible:t,hide:o,titleText:"Hide responses",confirmText:"Confirm",isDestructiveAction:!1},"People will still be able to respond, but the link to see responses will not be displayed at the bottom of your post.")},y=t(1506),x=t(73882),P=t(71245),S=t(74871),I=t(32262),R=t(80735),k=function(e){var n=e.viewer,t=e.show,o=e.post;return n&&"PENDING"===o.statusForCollection&&((0,S.DM)(o)||(0,S.py)(o,n))?s.createElement(I.Sl,null,s.createElement(C.rU,{onClick:t},"Manage submission")):null},_=function(e){var n=e.children,t=e.isVisible,o=e.post,i=e.hide,r=e.showLoadingIndicator,l=(0,P.h3)(o),a=(0,P.yb)(o),u=(0,c.I0)(),m=o.pendingCollection;return m?s.createElement(C.J2,{isVisible:t,hide:i,popoverRenderFn:function(){return s.createElement(C.xu,{padding:"16px",maxWidth:"280px"},s.createElement(C.xu,{display:"flex",flexDirection:"row",alignItems:"center"},s.createElement(C.xu,{paddingRight:"8px"},s.createElement(x.v,{collection:m,size:40})),s.createElement(R.F,{scale:"S"},"This draft is submitted to ",m.name,".")),s.createElement(C.xu,{flexDirection:"row",display:"flex",paddingTop:"16px"},s.createElement(C.xu,{paddingRight:"8px"},s.createElement(C.zx,{buttonStyle:"OBVIOUS",onClick:function(){i(),r(),l(o.pendingCollection).then((function(){window.location.reload(!1)}))}},"Accept")),s.createElement(C.zx,{buttonStyle:"SUBTLE",onClick:function(){a(o.pendingCollection).then((function(){u((0,d.Dx)({message:"Story removed from ".concat(m.name||"publication")}))})),i()}},"Don't accept")))}},n):n},F=function(e){var n=e.viewer,t=e.show,o=e.post;return n&&("APPROVED"===o.statusForCollection&&((0,S.DM)(o)||(0,S.py)(o,n)||(0,S.Hj)(o,n))||"PENDING"===o.statusForCollection&&(0,S.Hj)(o,n))?s.createElement(I.Sl,null,s.createElement(C.rU,{onClick:t},"Remove story from publication")):null},M=function(e){var n=e.children,t=e.isVisible,o=e.hide,i=e.post,r=e.viewer,l=(0,c.I0)(),a=(0,P.yb)(i),u=i.collection||i.pendingCollection;return u?s.createElement(C.J2,{isVisible:t,hide:o,popoverRenderFn:function(){return s.createElement(C.xu,{padding:"16px",maxWidth:"280px"},s.createElement(C.xu,{display:"flex",flexDirection:"row",alignItems:"center"},s.createElement(C.xu,{paddingRight:"8px"},s.createElement(x.v,{collection:u,size:40})),"APPROVED"===i.statusForCollection?s.createElement(R.F,{scale:"S"},(0,S.Hj)(i,r)?"Your":"This"," story is published in"," ",u.name,"."):"PENDING"===i.statusForCollection?s.createElement(R.F,{scale:"S"},"Your story is being reviewed by ",u.name," editors."):s.createElement(R.F,{scale:"S"},"This draft is submitted to ",u.name)),s.createElement(C.xu,{flexDirection:"row",display:"flex",paddingTop:"16px"},s.createElement(C.xu,{paddingRight:"8px"},s.createElement(C.zx,{buttonStyle:"SUBTLE",onClick:function(){a(u).then((function(){l((0,d.Dx)({message:"Story removed from ".concat(u.name||"publication")}))}),(function(){l((0,d.Dx)({message:"There was a problem removing the story from ".concat(u.name||"publication"),toastStyle:"ERROR"}))})),o()}},"PENDING"===i.statusForCollection?"Cancel submission":"Remove from ".concat(u.name||"")))))}},n):n},V=t(965),A=t(49925),U=t(78820),D=t(66893),T=t(9785),B=t(62181),L=t(18970),O=t(90639),N=t(16811),H=t(93394),j=t(76579),z=t(95614),G=t(96879),K=t(55573),Q=t(27952);function Z(){var e=i()(["\n  fragment CreatorActionOverflowPopover_post on Post {\n    allowResponses\n    id\n    statusForCollection\n    isLocked\n    isPublished\n    clapCount\n    viewerClapCount\n    mediumUrl\n    pinnedAt\n    pinnedByCreatorAt\n    curationEligibleAt\n    mediumUrl\n    shareKey\n    visibility\n    ...useIsPinnedInContext_post\n    pendingCollection {\n      id\n      name\n      viewerIsEditor\n      creator {\n        id\n      }\n      avatar {\n        id\n      }\n      domain\n      slug\n    }\n    creator {\n      id\n      isBlocking\n      ...MutePopoverOptions_creator\n      ...auroraHooks_publisher\n    }\n    collection {\n      id\n      viewerIsEditor\n      name\n      creator {\n        id\n      }\n      avatar {\n        id\n      }\n      domain\n      slug\n      ...MutePopoverOptions_collection\n      ...auroraHooks_publisher\n    }\n    ...ClapMutation_post\n  }\n  ","\n  ","\n  ","\n  ","\n  ","\n"]);return Z=function(){return e},e}var $=function(e){return{fill:e.baseColor.fill.normal,":hover":{fill:e.baseColor.fill.darker},":focus":{fill:e.baseColor.fill.darker}}};function J(){return s.createElement(C.hS,null,(function(e){return s.createElement(H.Z,{className:e($)})}))}var W=function(e){var n,t,o=e.creator,i=e.post,r=e.collection,a=e.showLoadingIndicator,u=e.setIsAuthorOrPubMuted,m=e.setMutedAuthorId,p=e.setMutedPubId,x=e.isMutingFromHomeFeed,P=s.useState(!1),S=l()(P,2),R=S[0],H=S[1],Z=s.useState(!1),$=l()(Z,2),W=$[0],q=$[1],Y=s.useState(!1),X=l()(Y,2),ee=X[0],ne=X[1],te=(0,c.v9)((function(e){return e.multiVote.clapsPerPost})),oe=(0,c.I0)(),ie=s.useCallback((function(e){return oe((0,N.at)(e))}),[oe]),re=(0,K.l)(te,i),le=re.clapCount,ae=re.viewerClapCount,se=(0,d.w)(),ce=(0,T.YC)().value,ue=null==ce?void 0:ce.id,de=(0,V.CP)(),me=(0,U.KQ)(i),pe=l()(me,2),fe=pe[0],Ee=pe[1],ve=(0,A.UL)(i.collection),he=(0,A.UL)(i.creator),ge=s.useCallback((function(e){var n;se({extraParams:{collectionName:(null===(n=i.collection)||void 0===n?void 0:n.name)||"",becamePinned:!!e.data.setPinnedAt.pinnedAt},message:"",toastStyle:"POST_PINNED_TO_COLLECTION_HOMEPAGE"})}),[null===(n=i.collection)||void 0===n?void 0:n.name]),be=s.useCallback((function(e){se({message:e.data.postSetPinnedByCreatorAt.pinnedByCreatorAt?"This story has been pinned to your profile's homepage":"This story has been unpinned from your profile's homepage"})}),[]),Ce=s.useCallback((function(){Ee().then(ge)}),[Ee,ge,null==i||null===(t=i.collection)||void 0===t?void 0:t.name]),we=(0,U.In)(i),ye=l()(we,2),xe=ye[0],Pe=ye[1],Se=s.useCallback((function(){Pe().then(be)}),[Pe,be]),Ie=!(0,z.T)(),Re=(0,c.v9)((function(e){return e.config.authDomain})),ke=(0,D.P5)("can_edit_members_only_posts");if(!o||!ce)return null;var _e=i.allowResponses,Fe=i.id,Me=i.pendingCollection,Ve=i.mediumUrl,Ae=i.shareKey,Ue=i.visibility,De=(r||{}).viewerIsEditor||(Me||{}).viewerIsEditor,Te=ue===o.id||De,Be=ke&&i&&i.isLocked,Le=Te||Be,Oe=!!i.curationEligibleAt,Ne="UNLISTED"===Ue;return s.createElement(C.Bn,null,(function(e){var n=e.isVisible,t=e.toggle,l=e.hide;return s.createElement(C.Bn,null,(function(e){var c=e.isVisible,d=e.show,P=e.hide;return s.createElement(C.Bn,null,(function(e){var S=e.isVisible,V=e.show,A=e.hide;return s.createElement(C.Bn,null,(function(e){var U=e.isVisible,D=e.show,T=e.hide;return s.createElement(v.Z,{targetUserId:null==o?void 0:o.id,viewerId:ce.id,onCompleted:P},(function(e){var v=e.mutate;return s.createElement(g.Z,{targetUserId:null==o?void 0:o.id,viewerId:ce.id},(function(e){var g=e.mutate;return s.createElement(h.Z,{targetAuthorId:null==o?void 0:o.id,targetPostId:i.id,isBlocking:null==o?void 0:o.isBlocking},(function(e){var h=e.mutate;return s.createElement(E,{targetPostId:Fe},(function(e){var E=e.mutate;return s.createElement(f,{targetPostId:Fe},(function(e){var f=e.mutate;return s.createElement(s.Fragment,null,s.createElement(C.J2,{isVisible:n,hide:l,popoverRenderFn:function(){var e;return s.createElement(I.mX,null,s.createElement(s.Fragment,null,r&&De&&ve&&s.createElement(I.Sl,null,s.createElement(C.rU,{onClick:Ce},fe?"Unpin this story from ":"Pin this story to ",r.name)),(null===(e=i.creator)||void 0===e?void 0:e.id)===ce.id&&he&&s.createElement(I.Sl,null,s.createElement(C.rU,{onClick:Se},xe?"Unpin this story from your profile":"Pin this story to your profile")),Ie&&Le?s.createElement(s.Fragment,null,s.createElement(I.Sl,null,s.createElement(C.rU,{linkStyle:"SUBTLE",href:(0,Q.d0)(Re,i.id)},"Edit story")),s.createElement(I.oK,null)):null,Te&&s.createElement(I.Sl,null,s.createElement(C.rU,{href:(0,Q.KI)(Re,i.id)},"Story settings")),Te&&s.createElement(I.Sl,null,s.createElement(C.rU,{href:(0,Q.T0)(Re,i.id)},"View stats")),Oe&&!Ne&&Ve&&Ae&&s.createElement(I.Sl,null,s.createElement(j.b,{url:(0,G.Rk)((0,Q.jV)(i),{sk:Ae}),linkStyle:"SUBTLE"},(function(e){return e?"Copied!":"Copy Friend Link"}))),s.createElement(b.qT,{hidePopover:l,creator:o,collection:r,postId:i.id,setIsAuthorOrPubMuted:u,setMutedAuthorId:m,setMutedPubId:p,isMutingFromHomeFeed:x}),s.createElement(y.yi,{post:i,show:function(){q(!0),l()}}),s.createElement(F,{viewer:ce,post:i,show:function(){ne(!0),l()}}),s.createElement(k,{viewer:ce,post:i,show:function(){H(!0),l()}})),ue===o.id||De?s.createElement(s.Fragment,null,s.createElement(I.Sl,null,s.createElement(C.rU,{onClick:function(){_e?D():E(),l()}},_e?"Hide responses":"Show responses")),s.createElement(I.oK,null)):null,ue&&le&&ae&&ae>0?s.createElement(I.Sl,null,s.createElement(C.rU,{onClick:function(){de(i,(null==ce?void 0:ce.id)||"",-ae),ie({postId:Fe,clapCount:le-ae,viewerClapCount:0,viewerHasClappedSinceFetch:!0}),l()}},"Undo applause for this post")):null,s.createElement(I.Sl,null,ue?s.createElement(C.rU,{onClick:function(){V(),l()}},"Report this story"):s.createElement(B.R9,{operation:"register",post:i,susiEntry:"report_footer"},"Report this story")),ue?s.createElement(I.Sl,null,s.createElement(C.rU,{onClick:function(){o.isBlocking?g():d(),l()}},o.isBlocking?"Unblock this author":"Block this author")):null)}},s.createElement(y.jB,{post:i,isVisible:W,hide:function(){q(!1)},showLoadingIndicator:a},s.createElement(M,{viewer:ce,post:i,isVisible:ee,hide:function(){ne(!1)}},s.createElement(_,{post:i,isVisible:R,hide:function(){H(!1)},showLoadingIndicator:a},s.createElement(C.xu,{flexGrow:"0"},s.createElement(C.rU,{onClick:t,ariaLabel:"More options"},s.createElement(J,null))))))),s.createElement(w,{onConfirm:f,isVisible:U,hide:T}),s.createElement(L.Z,{onConfirm:v,isVisible:c,hide:P}),s.createElement(O.Z,{onSubmit:h,isVisible:S,hide:A}))}))}))}))}))}))}))}))}))}))},q=(0,a.Ps)(Z(),b.mz,b.Gj,V.JP,U.xt,A.C5)},1506:(e,n,t)=>{"use strict";t.d(n,{x7:()=>_,yi:()=>V,jB:()=>D});var o=t(63038),i=t.n(o),r=t(28655),l=t.n(r),a=t(71439),s=t(80439),c=t(67294),u=t(73882),d=t(71245),m=t(74871),p=t(24087),f=t(32262),E=t(79316),v=t(80735),h=t(36808);function g(){var e=l()(["\n  fragment CollectionSubmission_post on Post {\n    id\n    ...CollectionSubmissionPopover_post\n    ...CollectionSubmissionPopoverMenuItem_post\n  }\n  ","\n  ","\n"]);return g=function(){return e},e}function b(){var e=l()(["\n  fragment CollectionSubmissionPopover_post on Post {\n    id\n    isPublished\n    creator {\n      id\n    }\n  }\n"]);return b=function(){return e},e}function C(){var e=l()(["\n  fragment CollectionSubmissionPopoverMenuItem_post on Post {\n    id\n    statusForCollection\n    isPublished\n    creator {\n      id\n    }\n  }\n"]);return C=function(){return e},e}function w(){var e=l()(["\n  query CollectionSubmissionPopoverQuery {\n    viewer {\n      id\n      writerCollections {\n        ...CollectionSubmissionPopoverQuery_collection\n      }\n      adminCollections {\n        ...CollectionSubmissionPopoverQuery_collection\n      }\n    }\n  }\n  ","\n"]);return w=function(){return e},e}function y(){var e=l()(["\n  fragment CollectionSubmissionPopoverQuery_collection on Collection {\n    ...CollectionSubmissionOption_collection\n    ...ManageSubmission_collection\n  }\n  ","\n  ","\n"]);return y=function(){return e},e}function x(){var e=l()(["\n  fragment CollectionSubmissionOption_collection on Collection {\n    id\n    name\n    slug\n    ...CollectionAvatar_collection\n  }\n  ","\n"]);return x=function(){return e},e}var P=(0,a.Ps)(x(),u.d),S=(0,a.Ps)(y(),P,m.a6),I=(0,a.Ps)(w(),S),R=(0,a.Ps)(C()),k=(0,a.Ps)(b()),_=(0,a.Ps)(g(),k,R),F=[{name:"",value:"No publication",content:c.createElement(E.xu,{height:"32px",display:"flex",alignItems:"center",marginLeft:"5px"},c.createElement(v.F,{scale:"M",color:"DARKER"},"No publication"))}];function M(e){var n=e.collection;return n.name?c.createElement(E.xu,{display:"flex",justifyContent:"space-between",width:"200px",alignItems:"center",marginLeft:"5px"},c.createElement(v.F,{scale:"M",color:"DARKER"},n.name),c.createElement(u.v,{collection:n,size:32})):null}function V(e){var n=e.show,t=e.post,o=t.statusForCollection,r=t.isPublished,l=c.useState(!1),a=i()(l,2),s=a[0],u=a[1];return s||h.V6.on("load",(function(){return u(!0)})),!o&&r&&s?c.createElement(U,{post:t,noQueryReturn:null},(function(e){var o=e.loading,i=e.error,r=e.data;if(o||i)return null;var l=(void 0===r?{viewer:void 0}:r).viewer,a=t.creator;if(!l||!a||l.id!==a.id)return null;var s=l.adminCollections,u=l.writerCollections;return 0===s.length&&0===u.length?null:c.createElement(f.Sl,null,c.createElement(E.rU,{onClick:n},"Add to publication"))})):null}function A(e){var n=e.isVisible,t=e.hide;return c.createElement(E.Vq,{isVisible:n,hide:t,withCloseButton:!0},c.createElement(E.xu,{display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",maxWidth:"480px"},c.createElement(v.X6,{scale:"M",tag:"h3"},"Story submitted"),c.createElement(E.xu,{paddingTop:"8px",paddingBottom:"24px"},c.createElement(v.QE,{scale:"M"},"Weâ€™ll email you when the publication editor has reviewed your submission.")),c.createElement(E.zx,{buttonStyle:"OBVIOUS",onClick:t},"OK")))}var U=function(e){var n=e.children,t=e.post,o=e.noQueryReturn,i=t.creator;return i?c.createElement(p.Z,null,(function(e){return e?e.id!==i.id?o:c.createElement(s.AE,{query:I,ssr:!1},(function(e){var t=e.loading,o=e.error,i=e.data;return n({loading:t,error:o,data:i})})):o})):o},D=function(e){var n=e.post,t=e.hide,o=e.showLoadingIndicator,r=e.isVisible,l=e.children,a=c.useState(!1),s=i()(a,2),u=s[0],m=s[1],p=c.useState(""),f=i()(p,2),g=f[0],b=f[1],C=(0,d.h3)(n),w=(0,d.Lf)(n);return u||h.V6.on("load",(function(){return m(!0)})),n.isPublished&&u?c.createElement(E.Bn,null,(function(e){var i=e.isVisible,a=e.hide,s=e.show;return c.createElement(c.Fragment,null,c.createElement(A,{hide:a,isVisible:i}),c.createElement(U,{post:n,noQueryReturn:l},(function(e){var i=e.loading,a=e.error,u=e.data;if(i||a)return l;var d=(void 0===u?{viewer:void 0}:u).viewer,m=n.creator;if(!d||!m||d.id!==m.id)return l;var p=d.adminCollections,f=d.writerCollections;if(0===p.length&&0===f.length)return l;var h=p.concat(f).filter((function(e){return!!e&&!!e.slug&&!!e.name})).map((function(e){return{name:e.slug||"",value:e.name||"",content:c.createElement(M,{collection:e})}})),y=F.concat(h),x=p.reduce((function(e,n){return e[n.slug||""]=n,e}),{}),P=f.reduce((function(e,n){return e[n.slug||""]=n,e}),{}),S="";if(g){var I=y.find((function(e){return e.name===g}));I&&(S=I.value)}return c.createElement(E.J2,{placement:"top",hide:t,isVisible:r,popoverRenderFn:function(){return c.createElement(E.xu,{padding:"20px",width:"280px",display:"flex",flexDirection:"column"},c.createElement(v.F,{scale:"M",color:"DARKER"},"Add your story to a publication:"),c.createElement(E.xu,{marginTop:"10px"},c.createElement(E.Ee,{value:S,onChange:b,options:y})),c.createElement(E.xu,{display:"flex",marginTop:"20px"},c.createElement(v.F,{scale:"M",color:"LIGHTER"},g in x?c.createElement(E.zx,{onClick:function(){var e=x[g];t(),o(),C(e).then((function(){window.location.reload(!1)}))},buttonStyle:"OBVIOUS"},"Add story"):c.createElement(E.zx,{onClick:function(){var e=P[g];w(e),t(),s()},disabled:!g},"Submit")),c.createElement(E.xu,{marginLeft:"10px"},c.createElement(v.F,{scale:"M",color:"LIGHTER"},c.createElement(E.rU,{onClick:t},c.createElement(E.xu,{padding:"10px"},"Cancel"))))),c.createElement(E.xu,{marginTop:"10px"},c.createElement(v.F,{scale:"M"},"This story will be automatically submitted to the publication. When you submit your story, the publication's editors will be notified and will be able to edit your story.")))}},l)})))})):l}},74871:(e,n,t)=>{"use strict";t.d(n,{Hj:()=>c,py:()=>u,DM:()=>d,a6:()=>m,En:()=>p});var o=t(28655),i=t.n(o),r=t(71439),l=t(73882);function a(){var e=i()(["\n  fragment ManageSubmission_post on Post {\n    id\n    statusForCollection\n    collection {\n      ...ManageSubmission_collection\n    }\n    pendingCollection {\n      ...ManageSubmission_collection\n    }\n    creator {\n      id\n    }\n  }\n  ","\n"]);return a=function(){return e},e}function s(){var e=i()(["\n  fragment ManageSubmission_collection on Collection {\n    name\n    viewerIsEditor\n    creator {\n      id\n    }\n    ...CollectionAvatar_collection\n  }\n  ","\n"]);return s=function(){return e},e}var c=function(e,n){return n&&e.creator&&n.id===e.creator.id},u=function(e,n){var t=e.pendingCollection||e.collection;return t&&t.creator&&n.id===t.creator.id},d=function(e){var n=e.pendingCollection||e.collection;return n&&n.viewerIsEditor},m=(0,r.Ps)(s(),l.d),p=(0,r.Ps)(a(),m)}}]);
//# sourceMappingURL=9347.2f6027ed.chunk.js.map